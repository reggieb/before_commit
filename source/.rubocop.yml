AllCops:
  TargetRubyVersion: 2.2
  Include:
    - '**/Rakefile'
    - '**/config.ru'
  Exclude:
    - 'db/**/*'
    - 'config/**/*'
    - 'script/**/*'
    - !ruby/regexp /old_and_unused\.rb$/
    # Bin contains standard files created when Rails is initialised and
    # therefore they should be left as is
    - 'bin/**/*'
    # Rakefile is generated when Rails is initialised and therefore should be
    # left as is
    - 'Rakefile'
    # spec_helper is generated when rspec is initialised and therefore should be
    # left as is
    - 'spec/spec_helper.rb'
    - spec/dummy/db/schema.rb

inherit_from:
  - rubocop/gds-ruby-styleguide.yml
  - rubocop/other-lint.yml
  - rubocop/other-rails.yml
  - rubocop/other-style.yml




# Looks cluttered/ugly having your first method directly after the module/class declaration
Style/EmptyLinesAroundModuleBody:
    Enabled: false
Style/EmptyLinesAroundClassBody:
    Enabled: false

# Rubymine disagrees and not sure how to fix Rubymine indentation right now
CaseIndentation:
    Description: Indentation of when in a case/when/[else/]end.
    Enabled: false

Metrics/AbcSize:
  # The ABC size is a calculated magnitude, so this number can be a Fixnum or
  # a Float.
  Max: 60
  Exclude:
    - app/controllers/concerns/enrollment_state_manager.rb

Metrics/PerceivedComplexity:
  Max: 15
  Exclude:
    - app/controllers/concerns/enrollment_state_manager.rb

LineLength:
  Description: Limit lines to 120 characters.
  Enabled: true
  Max: 120
  Exclude:
    - spec/factories/*.rb
    - spec/features/*_spec.rb
    - spec/routing/*_spec.rb

#CODE SPECIFIC EXCLUSIONS

# I don't understand this for now - seems to prevent perfectly
# reasonable meta-programming
NestedMethodDefinition:
    Enabled: false

# Turn these off as can totally mess with the expect{...}.to syntax
# Also reports on model validations using Proc.new { style blocks
# but trying to use do .. end raises invalid syntax
Style/BlockDelimiters:
  Exclude:
    - spec/**/*_spec.rb
    - app/models/contact.rb

Style/ClassVars:
  Exclude:
    - lib/waste_exemptions/permitted_attributes.rb

#RSPEC SPECIFIC

MethodCalledOnDoEndBlock:
  Exclude:
    - spec/**/*_spec.rb

# Specs can get large and with good reason, no benefit splitting them up
Metrics/ModuleLength:
  Max: 500
  Exclude:
    - spec/**/*_spec.rb

# As a web app, as long as the team commit to using well named classes for
# controllers, models etc it should not be necessary to add top-level class
# documentation.
Documentation:
  Enabled: false

# We shouldn't be committing code with debug statements left in (e.g. byebug or save_and_open_page),
# we don't understand the GDS rationale for disabling this check
Debugger:
  Enabled: true

Style/StringLiterals:
  Enabled: true
  Exclude:
    - Gemfile
